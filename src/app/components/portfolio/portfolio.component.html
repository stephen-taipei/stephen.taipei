<section id="portfolio" #portfolioSection class="py-24 md:py-32 relative">
  <div class="container mx-auto px-4">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="section-title animate-on-scroll">
        <span class="text-gradient">作品集</span>
      </h2>
      <p class="section-subtitle animate-on-scroll">Featured Projects</p>
    </div>

    <!-- Projects Grid -->
    <div
      class="projects-grid grid md:grid-cols-2 gap-6 md:gap-8 max-w-5xl mx-auto"
    >
      @for (project of projects; track project.id) {
      <div
        class="project-card glass-card rounded-2xl overflow-hidden border transition-all duration-500 cursor-pointer group"
        [class]="getBorderClass(project.color)"
        (click)="openProject(project)"
      >
        <!-- Project Image / Placeholder -->
        <div
          class="relative h-48 overflow-hidden bg-gradient-to-br"
          [class]="getGradientClass(project.color)"
        >
          <!-- Decorative Elements -->
          <div class="absolute inset-0 flex items-center justify-center">
            <span class="text-6xl font-bold text-white/10 font-display">{{
              project.name.charAt(0)
            }}</span>
          </div>

          <!-- Hover Overlay -->
          <div
            class="absolute inset-0 bg-gradient-to-t from-deep-space/90 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-6"
          >
            <span class="text-neon-cyan font-medium flex items-center gap-2">
              查看詳情
              <svg
                class="w-5 h-5 transform group-hover:translate-x-1 transition-transform"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 8l4 4m0 0l-4 4m4-4H3"
                />
              </svg>
            </span>
          </div>

          <!-- Floating Badge -->
          <div class="absolute top-4 right-4">
            <span
              class="px-3 py-1 rounded-full text-xs font-medium glass-card"
              [class.text-neon-cyan]="project.color === 'cyan'"
              [class.text-neon-pink]="project.color === 'pink'"
              [class.text-purple-400]="project.color === 'purple'"
            >
              {{ project.technologies[0] }}
            </span>
          </div>
        </div>

        <!-- Project Info -->
        <div class="p-6">
          <h3
            class="text-xl font-bold text-white mb-2 group-hover:text-gradient transition-all"
          >
            {{ project.name }}
          </h3>
          <p class="text-gray-400 text-sm mb-4 line-clamp-2">
            {{ project.description }}
          </p>

          <!-- Tech Tags -->
          <div class="flex flex-wrap gap-2">
            @for (tech of project.technologies.slice(0, 3); track tech) {
            <span
              class="px-2 py-1 text-xs rounded bg-deep-space/50 text-gray-400 border border-gray-700"
            >
              {{ tech }}
            </span>
            } @if (project.technologies.length > 3) {
            <span
              class="px-2 py-1 text-xs rounded bg-deep-space/50 text-gray-500"
            >
              +{{ project.technologies.length - 3 }}
            </span>
            }
          </div>
        </div>
      </div>
      }
    </div>
  </div>

  <!-- Project Modal -->
  @if (selectedProject()) {
  <div
    class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-deep-space/80 backdrop-blur-sm animate-fade-in"
    (click)="closeModal()"
  >
    <div
      class="relative w-full max-w-2xl max-h-[90vh] overflow-y-auto glass-card rounded-2xl animate-scale-in"
      (click)="$event.stopPropagation()"
    >
      <!-- Close Button -->
      <button
        class="absolute top-4 right-4 p-2 rounded-full glass-card text-gray-400 hover:text-white hover:bg-neon-cyan/20 transition-all z-10"
        (click)="closeModal()"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>

      <!-- Modal Header -->
      <div
        class="relative h-56 bg-gradient-to-br"
        [class]="getGradientClass(selectedProject()!.color)"
      >
        <div class="absolute inset-0 flex items-center justify-center">
          <span class="text-8xl font-bold text-white/10 font-display">{{
            selectedProject()!.name.charAt(0)
          }}</span>
        </div>
      </div>

      <!-- Modal Content -->
      <div class="p-8">
        <h3 class="text-2xl font-bold text-white mb-2">
          {{ selectedProject()!.name }}
        </h3>
        <p class="text-gray-400 mb-6">{{ selectedProject()!.description }}</p>

        <!-- Achievements -->
        <div class="mb-6">
          <h4
            class="text-lg font-semibold text-white mb-3 flex items-center gap-2"
          >
            <svg
              class="w-5 h-5 text-neon-cyan"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"
              />
            </svg>
            主要成就
          </h4>
          <ul class="space-y-2">
            @for (achievement of selectedProject()!.achievements; track
            achievement) {
            <li class="flex items-start gap-3 text-gray-300">
              <span class="text-neon-pink mt-1">▸</span>
              <span>{{ achievement }}</span>
            </li>
            }
          </ul>
        </div>

        <!-- Technologies -->
        <div>
          <h4
            class="text-lg font-semibold text-white mb-3 flex items-center gap-2"
          >
            <svg
              class="w-5 h-5 text-neon-pink"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"
              />
            </svg>
            技術棧
          </h4>
          <div class="flex flex-wrap gap-2">
            @for (tech of selectedProject()!.technologies; track tech) {
            <span
              class="px-3 py-1.5 text-sm rounded-lg bg-deep-purple/30 text-gray-300 border border-neon-cyan/20"
            >
              {{ tech }}
            </span>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
  }

  <!-- Background Decoration -->
  <div
    class="absolute top-1/4 right-0 w-80 h-80 bg-neon-cyan/5 rounded-full blur-3xl"
  ></div>
  <div
    class="absolute bottom-1/4 left-0 w-96 h-96 bg-neon-pink/5 rounded-full blur-3xl"
  ></div>
</section>
